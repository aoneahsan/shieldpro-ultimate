(()=>{"use strict";var e={1253:(e,t,n)=>{n.d(t,{B:()=>i});var o=n(6964);class i{storage=o.h.getInstance();observer=null;adSkipTimer=null;isEnabled=!1;adSelectors={videoAds:[".video-ads",".ytp-ad-module",".ytp-ad-overlay-container",".ytp-ad-player-overlay","ytd-player-legacy-desktop-watch-ads-renderer","ytd-action-companion-ad-renderer","ytd-display-ad-renderer","ytd-video-masthead-ad-advertiser-info-renderer","ytd-video-masthead-ad-primary-video-renderer","ytd-in-feed-ad-layout-renderer","ytd-ad-slot-renderer","ytd-banner-promo-renderer","ytd-statement-banner-renderer","ytd-masthead-ad-v3-renderer","ytd-primetime-promo-renderer"],sidebarAds:["ytd-companion-slot-renderer","ytd-promoted-video-renderer","ytd-compact-promoted-video-renderer","#player-ads","#masthead-ad","#homepage-chrome-side-promo","#watch-channel-brand-div","#watch7-sidebar-ads"],feedAds:["ytd-rich-item-renderer:has(ytd-display-ad-renderer)","ytd-rich-item-renderer:has(ytd-in-feed-ad-layout-renderer)","ytd-rich-section-renderer:has(ytd-statement-banner-renderer)","ytd-feed-nudge-renderer","ytm-promoted-sparkles-web-renderer"],overlayAds:[".ytp-ad-overlay-slot",".ytp-ad-overlay-container",".ytp-ad-overlay-close-button",".ytp-ad-overlay-image",".ytp-ad-text-overlay","tp-yt-paper-dialog:has(ytd-mealbar-promo-renderer)","yt-mealbar-promo-renderer","ytd-popup-container"]};async init(){const e=await this.storage.getSettings();e.tier.level>=2&&e.enabled&&(this.isEnabled=!0,this.startBlocking()),chrome.runtime.onMessage.addListener(e=>{"settingsUpdated"===e.action&&(e.settings.tier.level>=2&&e.settings.enabled?this.isEnabled||(this.isEnabled=!0,this.startBlocking()):(this.isEnabled=!1,this.stopBlocking()))})}startBlocking(){this.removeAds(),this.skipVideoAds(),this.blockAdRequests(),this.observer=new MutationObserver(()=>{this.removeAds(),this.skipVideoAds()}),this.observer.observe(document.body,{childList:!0,subtree:!0}),this.adSkipTimer=setInterval(()=>{this.skipVideoAds(),this.removeAds()},1e3),this.injectCSS(),this.overrideYouTubeFunctions()}stopBlocking(){this.observer&&(this.observer.disconnect(),this.observer=null),this.adSkipTimer&&(clearInterval(this.adSkipTimer),this.adSkipTimer=null)}removeAds(){Object.values(this.adSelectors).flat().forEach(e=>{document.querySelectorAll(e).forEach(e=>{e&&(e.remove(),chrome.runtime.sendMessage({action:"adBlocked",category:"youtube",domain:"youtube.com"}))})});['[class*="ad-"]','[class*="ads-"]','[class*="promoted"]','[class*="sponsor"]','[id*="ad-"]','[id*="ads-"]'].forEach(e=>{document.querySelectorAll(e).forEach(e=>{const t=e.className.toString().toLowerCase(),n=e.id.toLowerCase();!(t.includes("ad-")||t.includes("ads-")||t.includes("promoted")||t.includes("sponsor")||n.includes("ad-")||n.includes("ads-"))||t.includes("load")||t.includes("add")||e.remove()})})}skipVideoAds(){const e=document.querySelector("video"),t=document.querySelector(".ytp-ad-player-overlay"),n=document.querySelector(".ytp-ad-skip-button, .ytp-ad-skip-button-modern"),o=document.querySelector(".ytp-ad-text");(t||o)&&(n?(n.click(),chrome.runtime.sendMessage({action:"adBlocked",category:"youtube",domain:"youtube.com"})):e&&(e.duration&&isFinite(e.duration)&&(e.currentTime=e.duration),e.muted=!0,e.playbackRate=16));const i=Array.from(document.querySelectorAll("*")).find(e=>"Skip Ad"===e.textContent?.trim()||"Skip Ads"===e.textContent?.trim());i&&i.click()}blockAdRequests(){const e=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(t,n,...o){if(!["/api/stats/ads","/api/stats/qoe","/pagead/","/ptracking","/get_midroll_","/youtubei/v1/log_event","/csi_204","/generate_204"].some(e=>n.includes(e)))return e.apply(this,[t,n,...o]);chrome.runtime.sendMessage({action:"adBlocked",category:"youtube",domain:"youtube.com"})};const t=window.fetch;window.fetch=function(e,n){const o="string"==typeof e?e:e.toString();return["/api/stats/ads","/api/stats/qoe","/pagead/","/ptracking","/get_midroll_","/youtubei/v1/log_event"].some(e=>o.includes(e))?(chrome.runtime.sendMessage({action:"adBlocked",category:"youtube",domain:"youtube.com"}),Promise.reject(new Error("Blocked by ShieldPro"))):t.apply(this,[e,n])}}injectCSS(){const e=document.createElement("style");e.textContent='\n      /* Hide all YouTube ads */\n      .video-ads,\n      .ytp-ad-module,\n      .ytp-ad-overlay-container,\n      .ytp-ad-player-overlay,\n      ytd-player-legacy-desktop-watch-ads-renderer,\n      ytd-action-companion-ad-renderer,\n      ytd-display-ad-renderer,\n      ytd-video-masthead-ad-advertiser-info-renderer,\n      ytd-video-masthead-ad-primary-video-renderer,\n      ytd-in-feed-ad-layout-renderer,\n      ytd-ad-slot-renderer,\n      ytd-banner-promo-renderer,\n      ytd-statement-banner-renderer,\n      ytd-masthead-ad-v3-renderer,\n      ytd-primetime-promo-renderer,\n      ytd-companion-slot-renderer,\n      ytd-promoted-video-renderer,\n      ytd-compact-promoted-video-renderer,\n      #player-ads,\n      #masthead-ad,\n      #homepage-chrome-side-promo,\n      #watch-channel-brand-div,\n      #watch7-sidebar-ads,\n      .ytp-ad-overlay-slot,\n      .ytp-ad-overlay-image,\n      .ytp-ad-text-overlay,\n      ytd-mealbar-promo-renderer,\n      yt-mealbar-promo-renderer,\n      ytd-popup-container:has(ytd-mealbar-promo-renderer),\n      tp-yt-paper-dialog:has(ytd-mealbar-promo-renderer),\n      ytd-feed-nudge-renderer,\n      ytm-promoted-sparkles-web-renderer,\n      ytd-rich-item-renderer:has(ytd-display-ad-renderer),\n      ytd-rich-item-renderer:has(ytd-in-feed-ad-layout-renderer),\n      ytd-rich-section-renderer:has(ytd-statement-banner-renderer) {\n        display: none !important;\n        visibility: hidden !important;\n        height: 0 !important;\n        width: 0 !important;\n        opacity: 0 !important;\n        pointer-events: none !important;\n      }\n\n      /* Remove ad placeholders */\n      .ytp-ad-preview-container,\n      .ytp-ad-message-container {\n        display: none !important;\n      }\n\n      /* Hide "Ad" badges */\n      .ytp-ad-badge,\n      .ytp-ad-badge-container {\n        display: none !important;\n      }\n\n      /* Hide ad duration and skip button area when no ad */\n      .ytp-ad-duration-remaining,\n      .ytp-ad-skip-button-container:empty {\n        display: none !important;\n      }\n\n      /* Clean up empty spaces left by ads */\n      ytd-rich-grid-renderer #contents:has(ytd-ad-slot-renderer) {\n        gap: 0 !important;\n      }\n    ',document.head.appendChild(e)}overrideYouTubeFunctions(){const e=document.createElement("script");e.textContent="\n      (function() {\n        // Block YouTube's ad-related objects\n        if (window.ytInitialPlayerResponse && window.ytInitialPlayerResponse.adPlacements) {\n          delete window.ytInitialPlayerResponse.adPlacements;\n        }\n\n        // Override ad-related properties\n        Object.defineProperty(window, 'ytInitialPlayerResponse', {\n          get: function() {\n            return this._ytInitialPlayerResponse;\n          },\n          set: function(value) {\n            if (value && value.adPlacements) {\n              delete value.adPlacements;\n            }\n            if (value && value.playerAds) {\n              delete value.playerAds;\n            }\n            this._ytInitialPlayerResponse = value;\n          }\n        });\n\n        // Remove ads from player config\n        const originalPlayerConfig = window.ytplayer?.config;\n        if (originalPlayerConfig) {\n          if (originalPlayerConfig.args?.ad3_module) {\n            delete originalPlayerConfig.args.ad3_module;\n          }\n          if (originalPlayerConfig.args?.ad_device) {\n            delete originalPlayerConfig.args.ad_device;\n          }\n          if (originalPlayerConfig.args?.ad_flags) {\n            delete originalPlayerConfig.args.ad_flags;\n          }\n          if (originalPlayerConfig.args?.ad_logging_flag) {\n            delete originalPlayerConfig.args.ad_logging_flag;\n          }\n          if (originalPlayerConfig.args?.ad_preroll) {\n            delete originalPlayerConfig.args.ad_preroll;\n          }\n          if (originalPlayerConfig.args?.ad_tag) {\n            delete originalPlayerConfig.args.ad_tag;\n          }\n        }\n\n        // Block YouTube ad-related API calls\n        const originalSetTimeout = window.setTimeout;\n        window.setTimeout = function(func, delay, ...args) {\n          const funcString = func.toString();\n          if (funcString.includes('ad') || funcString.includes('Ad') || funcString.includes('AD')) {\n            return -1; // Return invalid timer ID\n          }\n          return originalSetTimeout.apply(this, [func, delay, ...args]);\n        };\n      })();\n    ",document.documentElement.appendChild(e),e.remove()}}if("loading"===document.readyState)document.addEventListener("DOMContentLoaded",()=>{(new i).init()});else{(new i).init()}},2591:()=>{class e{enabled=!0;canvasProtectionEnabled=!0;webrtcProtectionEnabled=!0;audioFingerprintProtectionEnabled=!0;fontFingerprintProtectionEnabled=!0;originalMethods=new Map;constructor(){this.initialize()}async initialize(){const e=await chrome.storage.local.get(["privacySettings","tierLevel"]),t=e.privacySettings||{};(e.tierLevel||1)<4||(this.canvasProtectionEnabled=!1!==t.canvasProtection,this.webrtcProtectionEnabled=!1!==t.webrtcProtection,this.audioFingerprintProtectionEnabled=!1!==t.audioFingerprintProtection,this.fontFingerprintProtectionEnabled=!1!==t.fontFingerprintProtection,this.canvasProtectionEnabled&&this.protectCanvasFingerprinting(),this.webrtcProtectionEnabled&&this.protectWebRTC(),this.audioFingerprintProtectionEnabled&&this.protectAudioFingerprinting(),this.fontFingerprintProtectionEnabled&&this.protectFontFingerprinting(),chrome.storage.onChanged.addListener(e=>{e.privacySettings&&this.updateSettings(e.privacySettings.newValue)}))}protectCanvasFingerprinting(){const t=CanvasRenderingContext2D.prototype,n=WebGLRenderingContext.prototype,o=WebGL2RenderingContext?.prototype;this.originalMethods.set("getImageData",t.getImageData),this.originalMethods.set("toDataURL",HTMLCanvasElement.prototype.toDataURL),this.originalMethods.set("toBlob",HTMLCanvasElement.prototype.toBlob);const i=e=>{const t=e.data;for(let e=0;e<t.length;e+=4)Math.random()<.001&&(t[e]=Math.min(255,Math.max(0,t[e]+(2*Math.random()-1))),t[e+1]=Math.min(255,Math.max(0,t[e+1]+(2*Math.random()-1))),t[e+2]=Math.min(255,Math.max(0,t[e+2]+(2*Math.random()-1))));return e};if(t.getImageData=function(t,n,o,r){const a=e.prototype.originalMethods.get("getImageData").call(this,t,n,o,r);return i(a)},HTMLCanvasElement.prototype.toDataURL=function(t,n){const o=this.getContext("2d");if(o){const e=o.getImageData(0,0,this.width,this.height);o.putImageData(i(e),0,0)}return e.prototype.originalMethods.get("toDataURL").call(this,t,n)},HTMLCanvasElement.prototype.toBlob=function(t,n,o){const r=this.getContext("2d");if(r){const e=r.getImageData(0,0,this.width,this.height);r.putImageData(i(e),0,0)}return e.prototype.originalMethods.get("toBlob").call(this,t,n,o)},n){const e=n.getParameter;n.getParameter=function(t){switch(t){case this.VENDOR:return"Google Inc. (Generic)";case this.RENDERER:return"ANGLE (Generic GPU, D3D11)";case this.VERSION:return"WebGL 1.0 (OpenGL ES 2.0 Chromium)";case this.UNMASKED_VENDOR_WEBGL:return"Google Inc. (Generic)";case this.UNMASKED_RENDERER_WEBGL:return"ANGLE (Generic GPU, D3D11)";default:return e.call(this,t)}}}if(o){const e=o.getParameter;o.getParameter=function(t){switch(t){case this.VENDOR:return"Google Inc. (Generic)";case this.RENDERER:return"ANGLE (Generic GPU, D3D11)";case this.VERSION:return"WebGL 2.0 (OpenGL ES 3.0 Chromium)";case this.UNMASKED_VENDOR_WEBGL:return"Google Inc. (Generic)";case this.UNMASKED_RENDERER_WEBGL:return"ANGLE (Generic GPU, D3D11)";default:return e.call(this,t)}}}}protectWebRTC(){const e=window.RTCPeerConnection,t=window.webkitRTCPeerConnection,n=window.mozRTCPeerConnection;this.originalMethods.set("RTCPeerConnection",e),this.originalMethods.set("webkitRTCPeerConnection",t),this.originalMethods.set("mozRTCPeerConnection",n);const o=e=>new Proxy(e,{construct(e,t){const n=new e(...t),o=n.createDataChannel;n.createDataChannel=function(...e){return o.apply(this,e)};const i=n.createOffer;n.createOffer=function(e){return i.call(this,{...e,offerToReceiveAudio:!1,offerToReceiveVideo:!1})};const r=n.setLocalDescription;return n.setLocalDescription=function(e){return e.sdp&&(e.sdp=e.sdp.replace(/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]*:[a-f0-9]*:[a-f0-9]*:[a-f0-9]*:[a-f0-9]*:[a-f0-9]*:[a-f0-9]*:[a-f0-9]*)/g,"0.0.0.0")),r.call(this,e)},n}});e&&(window.RTCPeerConnection=o(e)),t&&(window.webkitRTCPeerConnection=o(t)),n&&(window.mozRTCPeerConnection=o(n))}protectAudioFingerprinting(){const e=window.AudioContext||window.webkitAudioContext;if(e){const t=e.prototype.createAnalyser,n=e.prototype.createDynamicsCompressor;e.prototype.createAnalyser=function(){const e=t.call(this),n=e.getFloatFrequencyData;return e.getFloatFrequencyData=function(e){n.call(this,e);for(let t=0;t<e.length;t++)void 0!==e[t]&&(e[t]+=1e-4*(Math.random()-.5))},e},e.prototype.createDynamicsCompressor=function(){const e=n.call(this),t=Object.getOwnPropertyDescriptor(e,"threshold")||Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"threshold");return t&&t.get&&Object.defineProperty(e,"threshold",{get:function(){const e=t.get.call(this);return{...e,value:e.value+.001*(Math.random()-.5)}},configurable:!0}),e}}}protectFontFingerprinting(){const e=document.createElement("canvas").getContext("2d");if(e){const t=e.measureText;e.measureText=function(e){const n=t.call(this,e);return{...n,width:n.width+.1*(Math.random()-.5),actualBoundingBoxLeft:(n.actualBoundingBoxLeft||0)+.1*(Math.random()-.5),actualBoundingBoxRight:(n.actualBoundingBoxRight||0)+.1*(Math.random()-.5)}}}const t=window.OffscreenCanvas;t&&(window.OffscreenCanvas=function(...e){const n=new t(...e),o=n.getContext("2d");if(o&&o.measureText){const e=o.measureText;o.measureText=function(t){const n=e.call(this,t);return{...n,width:n.width+.1*(Math.random()-.5)}}}return n})}updateSettings(e){this.canvasProtectionEnabled=!1!==e.canvasProtection,this.webrtcProtectionEnabled=!1!==e.webrtcProtection,this.audioFingerprintProtectionEnabled=!1!==e.audioFingerprintProtection,this.fontFingerprintProtectionEnabled=!1!==e.fontFingerprintProtection,this.canvasProtectionEnabled&&this.protectCanvasFingerprinting(),this.webrtcProtectionEnabled&&this.protectWebRTC(),this.audioFingerprintProtectionEnabled&&this.protectAudioFingerprinting(),this.fontFingerprintProtectionEnabled&&this.protectFontFingerprinting()}disable(){this.enabled=!1,this.originalMethods.has("getImageData")&&(CanvasRenderingContext2D.prototype.getImageData=this.originalMethods.get("getImageData")),this.originalMethods.has("toDataURL")&&(HTMLCanvasElement.prototype.toDataURL=this.originalMethods.get("toDataURL")),this.originalMethods.has("toBlob")&&(HTMLCanvasElement.prototype.toBlob=this.originalMethods.get("toBlob")),this.originalMethods.has("RTCPeerConnection")&&(window.RTCPeerConnection=this.originalMethods.get("RTCPeerConnection"))}getStatus(){return{enabled:this.enabled,canvasProtection:this.canvasProtectionEnabled,webrtcProtection:this.webrtcProtectionEnabled,audioFingerprintProtection:this.audioFingerprintProtectionEnabled,fontFingerprintProtection:this.fontFingerprintProtectionEnabled}}}const t=new e;window.shieldProPrivacy=t},6685:(e,t,n)=>{n.d(t,{M:()=>i,a:()=>o});const o={enabled:!0,whitelist:[],pausedDomains:[],tier:{level:1,name:"Basic",unlockedAt:Date.now(),progress:0},notifications:!0,showBadge:!0,autoUpdate:!0,developerMode:!1},i={totalBlocked:0,blockedToday:0,blockedThisWeek:0,blockedThisMonth:0,lastReset:Date.now(),domainStats:{},categoryStats:{ads:0,trackers:0,malware:0,social:0,youtube:0,other:0}}},6964:(e,t,n)=>{n.d(t,{h:()=>i});var o=n(6685);class i{static instance;constructor(){}static getInstance(){return i.instance||(i.instance=new i),i.instance}async getSettings(){try{return(await chrome.storage.local.get("settings")).settings||o.a}catch(e){return o.a}}async setSettings(e){try{const t={...await this.getSettings(),...e};await chrome.storage.local.set({settings:t})}catch(e){}}async updateSettings(e){return this.setSettings(e)}async getStats(){try{return(await chrome.storage.local.get("stats")).stats||o.M}catch(e){return o.M}}async updateStats(e){try{const t={...await this.getStats(),...e};await chrome.storage.local.set({stats:t})}catch(e){}}async incrementBlockedCount(e,t="ads"){try{const n=await this.getStats(),o=(new Date).setHours(0,0,0,0);n.lastReset<o&&(n.blockedToday=0,n.lastReset=o),n.totalBlocked++,n.blockedToday++,n.domainStats[e]=(n.domainStats[e]||0)+1,n.categoryStats[t]++,await this.updateStats(n)}catch(e){}}async addToWhitelist(e){try{const t=await this.getSettings();t.whitelist.includes(e)||(t.whitelist.push(e),await this.setSettings({whitelist:t.whitelist}))}catch(e){}}async removeFromWhitelist(e){try{const t=await this.getSettings();t.whitelist=t.whitelist.filter(t=>t!==e),await this.setSettings({whitelist:t.whitelist})}catch(e){}}async isWhitelisted(e){try{return(await this.getSettings()).whitelist.some(t=>e===t||e.endsWith(`.${t}`))}catch(e){return!1}}async toggleExtension(){try{const e=!(await this.getSettings()).enabled;return await this.setSettings({enabled:e}),e}catch(e){return!0}}async clearStats(){try{await chrome.storage.local.set({stats:o.M})}catch(e){}}}i.getInstance()}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o=n(1253),i=n(6964);class r{storage=i.h.getInstance();originalOpen=window.open;blockedPopups=0;tier=1;async init(){const e=await this.storage.getSettings();this.tier=e.tier?.level||1,this.tier>=1&&e.enabled&&(this.startBlocking(),this.injectProtection()),chrome.runtime.onMessage.addListener(e=>{"tierUpdated"===e.action&&(this.tier=e.tier)})}startBlocking(){this.overrideWindowOpen(),this.blockPopupTriggers(),this.preventNewWindows(),this.tier>=2&&this.blockNotifications()}overrideWindowOpen(){const e=this;window.open=function(...t){const n=t[0]||"",o=t[1]||"_blank",i=t[2]||"";return e.isLikelyPopup(n,o,i)?(e.blockedPopups++,chrome.runtime.sendMessage({action:"adBlocked",category:"other",domain:window.location.hostname}),null):e.originalOpen.apply(window,t)}}isLikelyPopup(e,t,n){if(!e||"about:blank"===e)return!0;if(["toolbar=no","location=no","directories=no","status=no","menubar=no","scrollbars=no","resizable=no","width=","height=","top=","left="].some(e=>n.toLowerCase().includes(e)))return!0;if(["doubleclick.net","googleadservices.com","googlesyndication.com","popads.net","popcash.net","popunder.net","propellerads.com","adcash.com","adskeeper.com","adsrvr.org","amazon-adsystem.com","taboola.com","outbrain.com","mgid.com","revcontent.com"].some(t=>e.includes(t)))return!0;if([/\/apu\.php/,/\/pup\.php/,/pop\.php/,/popup/i,/popunder/i,/click\.php/,/banner/i,/redirect/i,/track/i,/\/ad\//,/\/ads\//,/\/advertisement\//].some(t=>t.test(e)))return!0;if(this.tier>=2&&n.includes("width=")&&n.includes("height=")){const e=parseInt(n.match(/width=(\d+)/)?.[1]||"0"),t=parseInt(n.match(/height=(\d+)/)?.[1]||"0");if([{w:720,h:300},{w:320,h:50},{w:300,h:250},{w:336,h:280},{w:728,h:90},{w:468,h:60},{w:234,h:60},{w:88,h:31}].some(n=>Math.abs(e-n.w)<50&&Math.abs(t-n.h)<50))return!0}return!1}blockPopupTriggers(){document.addEventListener("click",e=>{const t=e.target;if(t.onclick||t.getAttribute("onclick")){const n=(t.onclick?.toString()||t.getAttribute("onclick")||"").toLowerCase();(n.includes("window.open")||n.includes("popup")||n.includes("popunder"))&&(e.preventDefault(),e.stopPropagation(),this.blockedPopups++)}if("A"===t.tagName||t.closest("a")){const n="A"===t.tagName?t:t.closest("a");"_blank"===n.target&&this.isSuspiciousLink(n.href)&&(e.preventDefault(),e.stopPropagation(),this.blockedPopups++)}},!0);let e=!1;window.addEventListener("blur",()=>{e=!0,setTimeout(()=>{e=!1},1e3)}),window.addEventListener("focus",()=>{e&&window.focus()})}isSuspiciousLink(e){return["bit.ly","tinyurl.com","goo.gl","ow.ly","short.link","adf.ly","adfoc.us","shrink.me","shorte.st"].some(t=>e.includes(t))}preventNewWindows(){window.showModalDialog&&(window.showModalDialog=()=>{}),document.addEventListener("submit",e=>{const t=e.target;if("_blank"===t.target){const n=t.action||"";this.isSuspiciousLink(n)&&(e.preventDefault(),this.blockedPopups++)}},!0)}blockNotifications(){const e=window.Notification;window.Notification=new Proxy(e,{construct:(e,t)=>({})}),Object.defineProperty(Notification,"permission",{get:()=>"denied",configurable:!1}),Notification.requestPermission=async()=>"denied"}injectProtection(){const e=document.createElement("script");e.textContent=`\n      (function() {\n        // Store original functions\n        const originalOpen = window.open;\n        const originalAlert = window.alert;\n        const originalConfirm = window.confirm;\n        const originalPrompt = window.prompt;\n        \n        // Track popup attempts\n        let popupAttempts = 0;\n        const maxPopupsPerMinute = 2;\n        const resetInterval = 60000; // 1 minute\n        \n        setInterval(() => {\n          popupAttempts = 0;\n        }, resetInterval);\n        \n        // Override window.open with rate limiting\n        window.open = function(...args) {\n          popupAttempts++;\n          \n          if (popupAttempts > maxPopupsPerMinute) {\n            console.log('ShieldPro: Rate limit exceeded for popups');\n            return null;\n          }\n          \n          const url = args[0] || '';\n          \n          // Block suspicious URLs\n          if (!url || url === 'about:blank' || url.includes('popup') || url.includes('ad')) {\n            console.log('ShieldPro: Blocked suspicious popup:', url);\n            return null;\n          }\n          \n          return originalOpen.apply(window, args);\n        };\n        \n        // For Tier 2+: Block annoying dialogs\n        if (${this.tier} >= 2) {\n          let dialogCount = 0;\n          const maxDialogs = 1;\n          \n          window.alert = function(msg) {\n            dialogCount++;\n            if (dialogCount > maxDialogs) {\n              console.log('ShieldPro: Blocked excessive alert');\n              return;\n            }\n            return originalAlert.call(window, msg);\n          };\n          \n          window.confirm = function(msg) {\n            dialogCount++;\n            if (dialogCount > maxDialogs) {\n              console.log('ShieldPro: Blocked excessive confirm');\n              return false;\n            }\n            return originalConfirm.call(window, msg);\n          };\n          \n          window.prompt = function(msg, defaultText) {\n            dialogCount++;\n            if (dialogCount > maxDialogs) {\n              console.log('ShieldPro: Blocked excessive prompt');\n              return null;\n            }\n            return originalPrompt.call(window, msg, defaultText);\n          };\n          \n          // Reset dialog count periodically\n          setInterval(() => {\n            dialogCount = 0;\n          }, resetInterval);\n        }\n        \n        // Prevent right-click popups\n        document.addEventListener('contextmenu', function(e) {\n          const target = e.target as HTMLElement;\n          if (target.onclick || target.getAttribute('onclick')) {\n            e.stopPropagation();\n          }\n        }, true);\n        \n        // Block beforeunload popups for Tier 2+\n        if (${this.tier} >= 2) {\n          window.addEventListener('beforeunload', function(e) {\n            delete e.returnValue;\n          }, true);\n        }\n      })();\n    `,document.documentElement&&(document.documentElement.appendChild(e),e.remove())}getBlockedCount(){return this.blockedPopups}}if("loading"===document.readyState)document.addEventListener("DOMContentLoaded",()=>{(new r).init()});else{(new r).init()}class a{isActive=!1;overlay=null;selectedElement=null;highlightBox=null;toolbar=null;storage=i.h.getInstance();customFilters=[];tier=1;async init(){const e=await this.storage.getSettings();this.tier=e.tier?.level||1,this.tier<3||(chrome.runtime.onMessage.addListener(e=>{"activateElementPicker"===e.action?this.activate():"deactivateElementPicker"===e.action&&this.deactivate()}),this.loadCustomFilters())}async loadCustomFilters(){try{const e=await chrome.storage.local.get("customFilters");this.customFilters=e.customFilters||[]}catch(e){}}async saveCustomFilter(e){try{this.customFilters.push(e),await chrome.storage.local.set({customFilters:this.customFilters}),this.applyCustomFilter(e),chrome.runtime.sendMessage({action:"customFilterAdded",selector:e})}catch(e){}}applyCustomFilter(e){try{document.querySelectorAll(e).forEach(e=>{e.style.display="none"})}catch(e){}}activate(){this.isActive||this.tier<3||(this.isActive=!0,this.createOverlay(),this.createToolbar(),this.attachEventListeners(),document.body.style.cursor="crosshair")}deactivate(){this.isActive&&(this.isActive=!1,this.removeOverlay(),this.removeToolbar(),this.removeHighlight(),document.body.style.cursor="")}createOverlay(){this.overlay=document.createElement("div"),this.overlay.id="shieldpro-element-picker-overlay",this.overlay.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      z-index: 2147483646;\n      pointer-events: none;\n      background: rgba(0, 0, 0, 0.1);\n    ",document.body.appendChild(this.overlay)}removeOverlay(){this.overlay&&(this.overlay.remove(),this.overlay=null)}createToolbar(){this.toolbar=document.createElement("div"),this.toolbar.id="shieldpro-picker-toolbar",this.toolbar.innerHTML=`\n      <div style="\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        background: white;\n        border-radius: 12px;\n        box-shadow: 0 4px 20px rgba(0,0,0,0.15);\n        padding: 16px;\n        z-index: 2147483647;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n        min-width: 320px;\n      ">\n        <div style="display: flex; align-items: center; margin-bottom: 12px;">\n          <svg style="width: 24px; height: 24px; margin-right: 8px; color: #3b82f6;" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>\n          </svg>\n          <h3 style="margin: 0; font-size: 18px; font-weight: 600; color: #1f2937;">Element Picker</h3>\n          <button id="shieldpro-picker-close" style="\n            margin-left: auto;\n            background: none;\n            border: none;\n            cursor: pointer;\n            padding: 4px;\n          ">\n            <svg style="width: 20px; height: 20px; color: #6b7280;" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>\n            </svg>\n          </button>\n        </div>\n        \n        <div style="margin-bottom: 12px;">\n          <p style="margin: 0 0 8px 0; font-size: 14px; color: #6b7280;">\n            Hover over an element and click to block it\n          </p>\n          <div id="shieldpro-picker-info" style="\n            background: #f3f4f6;\n            border-radius: 8px;\n            padding: 12px;\n            min-height: 60px;\n          ">\n            <p style="margin: 0 0 4px 0; font-size: 12px; color: #9ca3af;">Selected Element:</p>\n            <code id="shieldpro-picker-selector" style="\n              font-size: 12px;\n              color: #1f2937;\n              word-break: break-all;\n            ">None</code>\n          </div>\n        </div>\n        \n        <div style="display: flex; gap: 8px;">\n          <button id="shieldpro-picker-block" style="\n            flex: 1;\n            background: #3b82f6;\n            color: white;\n            border: none;\n            border-radius: 8px;\n            padding: 10px;\n            font-size: 14px;\n            font-weight: 500;\n            cursor: pointer;\n            disabled: true;\n          " disabled>\n            Block Element\n          </button>\n          <button id="shieldpro-picker-block-similar" style="\n            flex: 1;\n            background: #8b5cf6;\n            color: white;\n            border: none;\n            border-radius: 8px;\n            padding: 10px;\n            font-size: 14px;\n            font-weight: 500;\n            cursor: pointer;\n            disabled: true;\n          " disabled>\n            Block Similar\n          </button>\n        </div>\n        \n        <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid #e5e7eb;">\n          <p style="margin: 0; font-size: 12px; color: #9ca3af;">\n            Tier 3 Feature • Custom Filters: <span id="shieldpro-filter-count">${this.customFilters.length}</span>\n          </p>\n        </div>\n      </div>\n    `,document.body.appendChild(this.toolbar);const e=this.toolbar.querySelector("#shieldpro-picker-close"),t=this.toolbar.querySelector("#shieldpro-picker-block"),n=this.toolbar.querySelector("#shieldpro-picker-block-similar");e?.addEventListener("click",()=>this.deactivate()),t?.addEventListener("click",()=>this.blockSelected()),n?.addEventListener("click",()=>this.blockSimilar())}removeToolbar(){this.toolbar&&(this.toolbar.remove(),this.toolbar=null)}attachEventListeners(){document.addEventListener("mouseover",this.handleMouseOver),document.addEventListener("mouseout",this.handleMouseOut),document.addEventListener("click",this.handleClick),document.addEventListener("keydown",this.handleKeyDown)}handleMouseOver=e=>{if(!this.isActive)return;const t=e.target;this.isToolbarElement(t)||this.highlightElement(t)};handleMouseOut=e=>{this.isActive&&this.removeHighlight()};handleClick=e=>{if(!this.isActive)return;e.preventDefault(),e.stopPropagation();const t=e.target;this.isToolbarElement(t)||this.selectElement(t)};handleKeyDown=e=>{this.isActive&&"Escape"===e.key&&this.deactivate()};isToolbarElement(e){return null!==e.closest("#shieldpro-picker-toolbar")||null!==e.closest("#shieldpro-element-highlight")}highlightElement(e){this.removeHighlight();const t=e.getBoundingClientRect();this.highlightBox=document.createElement("div"),this.highlightBox.id="shieldpro-element-highlight",this.highlightBox.style.cssText=`\n      position: fixed;\n      top: ${t.top}px;\n      left: ${t.left}px;\n      width: ${t.width}px;\n      height: ${t.height}px;\n      background: rgba(59, 130, 246, 0.3);\n      border: 2px solid #3b82f6;\n      pointer-events: none;\n      z-index: 2147483645;\n      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);\n    `,document.body.appendChild(this.highlightBox)}removeHighlight(){this.highlightBox&&(this.highlightBox.remove(),this.highlightBox=null)}selectElement(e){this.selectedElement=e;const t=this.generateSelector(e),n=this.toolbar?.querySelector("#shieldpro-picker-selector"),o=this.toolbar?.querySelector("#shieldpro-picker-block"),i=this.toolbar?.querySelector("#shieldpro-picker-block-similar");n&&(n.textContent=t),o&&(o.disabled=!1,o.style.opacity="1",o.style.cursor="pointer"),i&&(i.disabled=!1,i.style.opacity="1",i.style.cursor="pointer"),this.highlightBox&&(this.highlightBox.style.background="rgba(239, 68, 68, 0.3)",this.highlightBox.style.borderColor="#ef4444",this.highlightBox.style.boxShadow="0 0 0 4px rgba(239, 68, 68, 0.1)")}generateSelector(e){if(e.id)return`#${e.id}`;if(e.className&&"string"==typeof e.className){const t=e.className.split(" ").filter(e=>e.length>0);if(t.length>0)return`.${t.join(".")}`}const t=[];let n=e;for(;n&&n!==document.body;){let e=n.tagName.toLowerCase();if(n.id){e=`#${n.id}`,t.unshift(e);break}if(n.className&&"string"==typeof n.className){const t=n.className.split(" ").filter(e=>e.length>0);t.length>0&&(e+=`.${t[0]}`)}t.unshift(e),n=n.parentElement}return t.join(" > ")}blockSelected(){if(!this.selectedElement)return;const e=this.generateSelector(this.selectedElement);this.saveCustomFilter(e),this.selectedElement.style.display="none";const t=this.toolbar?.querySelector("#shieldpro-filter-count");t&&(t.textContent=String(this.customFilters.length)),this.showNotification("Element blocked successfully!"),this.selectedElement=null,this.removeHighlight()}blockSimilar(){if(!this.selectedElement)return;let e="";if(this.selectedElement.className&&"string"==typeof this.selectedElement.className){const t=this.selectedElement.className.split(" ").filter(e=>e.length>0);t.length>0&&(e=`.${t[0]}`)}else e=this.selectedElement.tagName.toLowerCase();const t=document.querySelectorAll(e);let n=0;t.forEach(e=>{e.style.display="none",n++}),this.saveCustomFilter(e);const o=this.toolbar?.querySelector("#shieldpro-filter-count");o&&(o.textContent=String(this.customFilters.length)),this.showNotification(`Blocked ${n} similar elements!`),this.selectedElement=null,this.removeHighlight()}showNotification(e){const t=document.createElement("div");t.style.cssText="\n      position: fixed;\n      bottom: 20px;\n      right: 20px;\n      background: #10b981;\n      color: white;\n      padding: 12px 20px;\n      border-radius: 8px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      font-size: 14px;\n      z-index: 2147483647;\n      animation: slideIn 0.3s ease-out;\n    ",t.textContent=e;const n=document.createElement("style");n.textContent="\n      @keyframes slideIn {\n        from {\n          transform: translateX(100%);\n          opacity: 0;\n        }\n        to {\n          transform: translateX(0);\n          opacity: 1;\n        }\n      }\n    ",document.head.appendChild(n),document.body.appendChild(t),setTimeout(()=>{t.style.animation="slideOut 0.3s ease-out",setTimeout(()=>{t.remove(),n.remove()},300)},3e3)}}if("loading"===document.readyState)document.addEventListener("DOMContentLoaded",()=>{(new a).init()});else{(new a).init()}var s=n(2591);class l{consentSelectors={generic:['[id*="reject"]','[class*="reject"]','[id*="decline"]','[class*="decline"]','[id*="deny"]','[class*="deny"]','button:contains("Reject")','button:contains("Decline")','button:contains("No thanks")','button:contains("I decline")','a:contains("Reject all")','a:contains("Decline all")'],platforms:{onetrust:[".ot-pc-refuse-all-handler","#onetrust-reject-all-handler",".onetrust-close-btn-handler.banner-close-button"],cookiebot:["#CybotCookiebotDialogBodyButtonDecline","[data-cookiebanner-reject]",".CybotCookiebotDialogBodyButton[data-cookiebanner-reject]"],trustarc:[".trustarc-decline-button","#truste-consent-decline",".truste-button2"],quantcast:["[onclick*=\"__qcCmp('setConsent', false)\"]",'.qc-cmp-button[mode="secondary"]',".qc-cmp-button.qc-cmp-secondary-button"],google:['[jsname="tWT92d"]','button[aria-label*="Reject"]',"#W0wltc"],facebook:['[data-cookiebanner="accept_only_essential_button"]','[data-testid="cookie-policy-banner-decline"]'],amazon:['input[aria-labelledby*="decline"]',"#sp-cc-rejectall-link"],didomi:["#didomi-notice-disagree-button",".didomi-components-button.didomi-button-secondary"],usercentrics:['[data-testid="uc-deny-all-button"]',".sc-gsDKAQ.fmuRqt"],civic:[".ccc-reject-button",".ccc-banner-decline-button"],crownpeak:[".cp-reject-all","#cp-reject-all-btn"],termly:[".t-declineAllButton","#termly-reject-all"]}};rejectedDomains=new Set;observerActive=!1;observer;init(){this.loadRejectedDomains(),this.rejectedDomains.has(window.location.hostname)||(this.detectAndRejectCookies(),this.startObserver())}async loadRejectedDomains(){const e=await chrome.storage.local.get(["rejectedCookieDomains"]);e.rejectedCookieDomains&&(this.rejectedDomains=new Set(e.rejectedCookieDomains))}async saveRejectedDomain(e){this.rejectedDomains.add(e),await chrome.storage.local.set({rejectedCookieDomains:Array.from(this.rejectedDomains)})}detectAndRejectCookies(){for(const[e,t]of Object.entries(this.consentSelectors.platforms))for(const n of t){const t=this.findElement(n);if(t)return void this.rejectCookies(t,e)}for(const e of this.consentSelectors.generic){const t=this.findElement(e);if(t)return void this.rejectCookies(t,"generic")}}findElement(e){try{if(e.includes(":contains")){const[t,n]=e.split(":contains"),o=n.replace(/[()'"]/g,""),i=document.querySelectorAll(t);for(const e of i)if(e.textContent?.toLowerCase().includes(o.toLowerCase()))return e;return null}return document.querySelector(e)}catch{return null}}rejectCookies(e,t){try{e.click();const n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});e.dispatchEvent(n),this.saveRejectedDomain(window.location.hostname),chrome.runtime.sendMessage({action:"cookiesRejected",platform:t,domain:window.location.hostname}).catch(()=>{}),this.stopObserver()}catch(e){}}startObserver(){if(this.observerActive)return;this.observerActive=!0;let e=0;this.observer=new MutationObserver(()=>{e++<20?this.detectAndRejectCookies():this.stopObserver()}),this.observer.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>this.stopObserver(),1e4)}stopObserver(){this.observer&&(this.observer.disconnect(),this.observerActive=!1)}rejectAll(){this.detectAndRejectCookies()}getStats(){return{rejectedDomains:this.rejectedDomains.size,domains:Array.from(this.rejectedDomains)}}}new class{youtubeBlocker;popupBlocker;elementPicker;privacyProtector;cookieConsentHandler;currentTier=1;constructor(){this.popupBlocker=new r,this.elementPicker=new a,this.privacyProtector=new s.PrivacyProtector,this.cookieConsentHandler=new l,this.initialize()}async initialize(){const e=await chrome.storage.local.get(["settings"]);this.currentTier=e.settings?.tier?.level||1,this.initializeTier1(),this.currentTier>=2&&this.initializeTier2(),this.currentTier>=3&&this.initializeTier3(),this.currentTier>=4&&this.initializeTier4(),this.listenForTierUpdates()}initializeTier1(){this.popupBlocker.init(),this.cookieConsentHandler.init(),this.injectBasicStyles()}initializeTier2(){window.location.hostname.includes("youtube.com")&&(this.youtubeBlocker=new o.B,this.youtubeBlocker.init()),this.privacyProtector.enableTrackingProtection()}initializeTier3(){this.elementPicker.enable(),this.loadCustomFilters()}initializeTier4(){this.privacyProtector.enableAdvancedProtection(),this.loadRegexPatterns()}injectBasicStyles(){const e=document.createElement("style");e.textContent='\n      /* Basic ad hiding rules */\n      [class*="ad-"], [id*="ad-"],\n      [class*="advertisement"], [id*="advertisement"],\n      [class*="banner-ad"], [id*="banner-ad"],\n      [class*="sponsored"], [id*="sponsored"],\n      .google-ads, .googleads,\n      .ad-container, .ad-wrapper,\n      .advertisement-container,\n      iframe[src*="doubleclick"],\n      iframe[src*="googlesyndication"] {\n        display: none !important;\n        visibility: hidden !important;\n        height: 0 !important;\n        width: 0 !important;\n      }\n    ',document.head.appendChild(e)}async loadCustomFilters(){const e=(await chrome.storage.local.get(["customFilters"])).customFilters||[];if(e.length>0){const t=document.createElement("style");t.id="shieldpro-custom-filters",t.textContent=e.filter(e=>e.enabled).map(e=>`${e.selector} { display: none !important; }`).join("\n"),document.head.appendChild(t)}}async loadRegexPatterns(){((await chrome.storage.local.get(["regexPatterns"])).regexPatterns||[]).filter(e=>e.enabled).forEach(e=>{try{const t=new RegExp(e.pattern,e.flags);"content"===e.category?this.applyContentRegex(t,e.action):"url"===e.category&&this.applyUrlRegex(t,e.action)}catch(e){}})}applyContentRegex(e,t){const n=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null);let o;for(;o=n.nextNode();)o.textContent&&e.test(o.textContent)&&"block"===t&&o.parentElement&&(o.parentElement.style.display="none")}applyUrlRegex(e,t){document.querySelectorAll("a[href], iframe[src]").forEach(n=>{const o=n.getAttribute("href")||n.getAttribute("src");o&&e.test(o)&&"block"===t&&n.remove()})}listenForTierUpdates(){chrome.runtime.onMessage.addListener((e,t,n)=>{if("tierUpdated"===e.action)this.currentTier=e.tier,this.initialize();else if("customFiltersUpdated"===e.action)this.loadCustomFilters();else if("regexPatternsUpdated"===e.action)this.loadRegexPatterns();else if("activateElementPicker"===e.action)this.elementPicker.activate();else if("testSelector"===e.action){n({matchCount:document.querySelectorAll(e.selector).length})}})}getBlockedCount(){return this.popupBlocker.getBlockedCount()}};let c=0;new MutationObserver(()=>{const e=document.querySelectorAll('[style*="display: none !important"]');if(e.length>c){const t=e.length-c;c=e.length,chrome.runtime.sendMessage({action:"adBlocked",count:t,domain:window.location.hostname,category:"ads"}).catch(()=>{})}}).observe(document.body,{childList:!0,subtree:!0})})();
//# sourceMappingURL=content.js.map