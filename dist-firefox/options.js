(()=>{"use strict";var e,t={9042:(e,t,s)=>{var a=s(4848),r=s(6540),l=s(5338),i=s(2469),c=s(5642),n=s(2911),d=s(8803),o=s(1806),x=s(4233),m=s(8368),h=s(1997),p=s(3794),g=s(2127),u=s(8864),y=s(4260),b=s(9045),j=s(1264),N=s(7563),f=s(5641),w=s(6015),v=s(3318);const k=({currentTier:e})=>{const[t,s]=(0,r.useState)([]),[l,i]=(0,r.useState)(!1),[n,d]=(0,r.useState)({name:"",selector:"",description:"",enabled:!0,isRegex:!1,isScheduled:!1}),[o,x]=(0,r.useState)([]),[p,k]=(0,r.useState)(""),[S,A]=(0,r.useState)(!1);(0,r.useEffect)(()=>{C()},[]);const C=async()=>{try{const e=await chrome.storage.local.get("customFilters");e.customFilters&&s(e.customFilters)}catch(e){}},T=async e=>{try{await chrome.storage.local.set({customFilters:e}),s(e),chrome.runtime.sendMessage({action:"customFiltersUpdated",filters:e})}catch(e){}};if(e<3)return(0,a.jsxs)("div",{className:"p-6 bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)(c.A,{className:"w-6 h-6 text-amber-600"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Custom Filters"})]}),(0,a.jsx)("p",{className:"text-gray-700 mb-4",children:"Upgrade to Tier 3 to unlock custom filter creation, element picker, and advanced blocking rules."}),(0,a.jsx)("button",{className:"px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors",children:"Upgrade to Tier 3"})]});return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(c.A,{className:"w-6 h-6 text-primary-600"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Custom Filters"}),(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full",children:"Tier 3 Feature"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{onClick:async()=>{const[e]=await chrome.tabs.query({active:!0,currentWindow:!0});e.id&&(chrome.tabs.sendMessage(e.id,{action:"activateElementPicker"}),window.close())},className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:[(0,a.jsx)(g.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Element Picker"})]}),(0,a.jsx)("button",{onClick:()=>{const e=document.createElement("input");e.type="file",e.accept="application/json",e.onchange=async e=>{const s=e.target.files?.[0];if(!s)return;const a=new FileReader;a.onload=async e=>{try{const s=JSON.parse(e.target?.result);if(Array.isArray(s)){const e=[...t,...s];await T(e),alert(`Imported ${s.length} filters successfully!`)}}catch(e){alert("Failed to import filters. Please check the file format.")}},a.readAsText(s)},e.click()},className:"p-2 text-gray-600 hover:text-gray-800 transition-colors",title:"Import filters",children:(0,a.jsx)(h.A,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>{const e=JSON.stringify(t,null,2),s="data:application/json;charset=utf-8,"+encodeURIComponent(e),a=`shieldpro-filters-${Date.now()}.json`,r=document.createElement("a");r.setAttribute("href",s),r.setAttribute("download",a),r.click()},className:"p-2 text-gray-600 hover:text-gray-800 transition-colors",title:"Export filters",children:(0,a.jsx)(m.A,{className:"w-5 h-5"})}),(0,a.jsxs)("button",{onClick:()=>i(!0),className:"px-3 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[(0,a.jsx)(u.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Add Filter"})]})]})]}),l&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Create New Filter"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter Name"}),(0,a.jsx)("input",{type:"text",value:n.name,onChange:e=>d({...n,name:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Remove sidebar ads"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),(0,a.jsx)("input",{type:"text",value:n.description,onChange:e=>d({...n,description:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"What does this filter do?"})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CSS Selector or Pattern"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",value:n.selector,onChange:e=>d({...n,selector:e.target.value}),className:"flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 font-mono text-sm",placeholder:".ad-container, #sidebar-ads, [class*='sponsored']"}),(0,a.jsx)("button",{onClick:async()=>{if(!n.selector)return;A(!0);const[e]=await chrome.tabs.query({active:!0,currentWindow:!0});e.id&&chrome.tabs.sendMessage(e.id,{action:"testSelector",selector:n.selector,isRegex:n.isRegex},e=>{k(void 0!==e?.matchCount?`Found ${e.matchCount} matching element(s)`:"Error testing selector"),A(!1)})},disabled:S,className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:S?(0,a.jsx)(y.A,{className:"w-4 h-4 animate-spin"}):"Test"})]}),p&&(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:p})]}),(0,a.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:n.enabled,onChange:e=>d({...n,enabled:e.target.checked}),className:"rounded text-primary-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Enable immediately"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:n.isRegex,onChange:e=>d({...n,isRegex:e.target.checked}),className:"rounded text-primary-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Use as Regular Expression"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:n.isScheduled,onChange:e=>d({...n,isScheduled:e.target.checked}),className:"rounded text-primary-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Schedule this filter"})]})]}),n.isScheduled&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Schedule Settings"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Active Days"}),(0,a.jsx)("div",{className:"flex space-x-2",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(e=>(0,a.jsx)("button",{onClick:()=>{x(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},className:"px-3 py-1 text-sm rounded "+(o.includes(e)?"bg-primary-600 text-white":"bg-gray-200 text-gray-600"),children:e},e))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Start Time"}),(0,a.jsx)("input",{type:"time",id:"startTime",className:"w-full px-3 py-2 border rounded-lg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"End Time"}),(0,a.jsx)("input",{type:"time",id:"endTime",className:"w-full px-3 py-2 border rounded-lg"})]})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:()=>{i(!1),d({name:"",selector:"",description:"",enabled:!0,isRegex:!1,isScheduled:!1}),k("")},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,a.jsxs)("button",{onClick:()=>{if(!n.name||!n.selector)return void alert("Please provide a name and selector");const e={id:Date.now().toString(),name:n.name,selector:n.selector,description:n.description,enabled:!1!==n.enabled,createdAt:Date.now(),matchCount:0,isRegex:n.isRegex,isScheduled:n.isScheduled,schedule:n.isScheduled?{days:o,startTime:document.getElementById("startTime")?.value,endTime:document.getElementById("endTime")?.value}:void 0},s=[...t,e];T(s),d({name:"",selector:"",description:"",enabled:!0,isRegex:!1,isScheduled:!1}),x([]),i(!1)},className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[(0,a.jsx)(b.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Save Filter"})]})]})]}),(0,a.jsx)("div",{className:"space-y-3",children:0===t.length?(0,a.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,a.jsx)(c.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gray-600",children:"No custom filters yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Create your first filter or use the element picker"})]}):t.map(e=>(0,a.jsx)("div",{className:"bg-white border rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),e.isRegex&&(0,a.jsx)("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded",children:"RegEx"}),e.isScheduled&&(0,a.jsxs)("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded flex items-center space-x-1",children:[(0,a.jsx)(j.A,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"Scheduled"})]})]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,a.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,a.jsx)("code",{className:"text-xs text-gray-700 bg-gray-100 px-2 py-1 rounded block overflow-x-auto",children:e.selector}),e.isScheduled&&e.schedule&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Active: ",e.schedule.days.join(", "),e.schedule.startTime&&e.schedule.endTime&&(0,a.jsxs)("span",{children:[" • ",e.schedule.startTime," - ",e.schedule.endTime]})]})]}),(0,a.jsxs)("div",{className:"mt-2 flex items-center space-x-4 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Created: ",new Date(e.createdAt).toLocaleDateString()]}),(0,a.jsxs)("span",{children:["Matches: ",e.matchCount]}),e.lastUsed&&(0,a.jsxs)("span",{children:["Last used: ",new Date(e.lastUsed).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,a.jsx)("button",{onClick:()=>(e=>{const s=t.map(t=>t.id===e?{...t,enabled:!t.enabled}:t);T(s)})(e.id),className:"p-2 rounded-lg transition-colors "+(e.enabled?"bg-green-100 text-green-600 hover:bg-green-200":"bg-gray-100 text-gray-400 hover:bg-gray-200"),title:e.enabled?"Disable":"Enable",children:e.enabled?(0,a.jsx)(g.A,{className:"w-4 h-4"}):(0,a.jsx)(N.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(e.selector),alert("Selector copied to clipboard!")},className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",title:"Copy selector",children:(0,a.jsx)(f.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>(e=>{const s=t.filter(t=>t.id!==e);T(s)})(e.id),className:"p-2 text-red-400 hover:text-red-600 transition-colors",title:"Delete filter",children:(0,a.jsx)(w.A,{className:"w-4 h-4"})})]})]})},e.id))}),t.length>0&&(0,a.jsx)("div",{className:"bg-blue-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(v.A,{className:"w-5 h-5 text-blue-600"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:[t.filter(e=>e.enabled).length," active filters"]})]}),(0,a.jsxs)("span",{className:"text-sm text-blue-700",children:["Total blocked: ",t.reduce((e,t)=>e+t.matchCount,0)," elements"]})]})})]})};var S=s(6508),A=s(9158);const C=({currentTier:e})=>{const[t,s]=(0,r.useState)([]),[l,i]=(0,r.useState)(""),[c,n]=(0,r.useState)(!1),[o,p]=(0,r.useState)({domain:"",pattern:"",description:"",enabled:!0,isRegex:!1,isTemporary:!1,allowedResources:[]});(0,r.useEffect)(()=>{g()},[]);const g=async()=>{try{const e=await chrome.storage.local.get("advancedWhitelist");e.advancedWhitelist&&s(e.advancedWhitelist)}catch(e){}},y=async e=>{try{await chrome.storage.local.set({advancedWhitelist:e}),s(e),chrome.runtime.sendMessage({action:"whitelistUpdated",whitelist:e})}catch(e){}},N=t.filter(e=>e.domain.toLowerCase().includes(l.toLowerCase())||e.pattern?.toLowerCase().includes(l.toLowerCase())||e.description?.toLowerCase().includes(l.toLowerCase()));return e<3?(0,a.jsxs)("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)(d.A,{className:"w-6 h-6 text-blue-600"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Advanced Whitelist"})]}),(0,a.jsx)("p",{className:"text-gray-700 mb-4",children:"Upgrade to Tier 3 to unlock advanced whitelist features including patterns, regex support, and temporary whitelisting."}),(0,a.jsx)("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Upgrade to Tier 3"})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(d.A,{className:"w-6 h-6 text-primary-600"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Advanced Whitelist"}),(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full",children:"Tier 3 Feature"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{const e=document.createElement("input");e.type="file",e.accept="application/json",e.onchange=async e=>{const s=e.target.files?.[0];if(!s)return;const a=new FileReader;a.onload=async e=>{try{const s=JSON.parse(e.target?.result);if(Array.isArray(s)){const e=[...t,...s];await y(e),alert(`Imported ${s.length} entries successfully!`)}}catch(e){alert("Failed to import whitelist. Please check the file format.")}},a.readAsText(s)},e.click()},className:"p-2 text-gray-600 hover:text-gray-800 transition-colors",title:"Import whitelist",children:(0,a.jsx)(h.A,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>{const e=JSON.stringify(t,null,2),s="data:application/json;charset=utf-8,"+encodeURIComponent(e),a=document.createElement("a");a.setAttribute("href",s),a.setAttribute("download",`shieldpro-whitelist-${Date.now()}.json`),a.click()},className:"p-2 text-gray-600 hover:text-gray-800 transition-colors",title:"Export whitelist",children:(0,a.jsx)(m.A,{className:"w-5 h-5"})}),(0,a.jsxs)("button",{onClick:()=>n(!0),className:"px-3 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[(0,a.jsx)(u.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Add Entry"})]})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(S.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),placeholder:"Search whitelist entries...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500"})]}),c&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Add Whitelist Entry"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Domain"}),(0,a.jsx)("input",{type:"text",value:o.domain,onChange:e=>p({...o,domain:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"example.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pattern (Optional)"}),(0,a.jsx)("input",{type:"text",value:o.pattern,onChange:e=>p({...o,pattern:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"*/path/* or regex pattern"})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("input",{type:"text",value:o.description,onChange:e=>p({...o,description:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"Why is this site whitelisted?"})]}),(0,a.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:o.enabled,onChange:e=>p({...o,enabled:e.target.checked}),className:"rounded text-primary-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Enable immediately"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:o.isRegex,onChange:e=>p({...o,isRegex:e.target.checked}),className:"rounded text-primary-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Use Regular Expression"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:o.isTemporary,onChange:e=>p({...o,isTemporary:e.target.checked}),className:"rounded text-primary-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Temporary whitelist"})]})]}),o.isTemporary&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (hours)"}),(0,a.jsx)("input",{type:"number",id:"tempDuration",defaultValue:"24",min:"1",max:"720",className:"w-32 px-3 py-2 border rounded-lg"})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allowed Resource Types (Leave empty for all)"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:["script","image","stylesheet","font","media","xmlhttprequest","sub_frame","other"].map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-1",children:[(0,a.jsx)("input",{type:"checkbox",checked:o.allowedResources?.includes(e),onChange:t=>{const s=o.allowedResources||[];t.target.checked?p({...o,allowedResources:[...s,e]}):p({...o,allowedResources:s.filter(t=>t!==e)})},className:"rounded text-primary-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:e})]},e))})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:()=>{n(!1),p({domain:"",pattern:"",description:"",enabled:!0,isRegex:!1,isTemporary:!1,allowedResources:[]})},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,a.jsxs)("button",{onClick:()=>{if(!o.domain&&!o.pattern)return void alert("Please provide a domain or pattern");const e={id:Date.now().toString(),domain:o.domain||"",pattern:o.pattern,description:o.description,enabled:!1!==o.enabled,createdAt:Date.now(),isRegex:o.isRegex,isTemporary:o.isTemporary,expiresAt:o.isTemporary?Date.now()+60*parseInt(document.getElementById("tempDuration")?.value||"24")*60*1e3:void 0,allowedResources:o.allowedResources||[]},s=[...t,e];y(s),p({domain:"",pattern:"",description:"",enabled:!0,isRegex:!1,isTemporary:!1,allowedResources:[]}),n(!1)},className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[(0,a.jsx)(b.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Save Entry"})]})]})]}),(0,a.jsx)("div",{className:"space-y-3",children:0===N.length?(0,a.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,a.jsx)(d.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gray-600",children:"No whitelist entries yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Add trusted sites to allow ads on them"})]}):N.map(e=>(0,a.jsx)("div",{className:"bg-white border rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.domain||e.pattern}),e.isRegex&&(0,a.jsx)("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded",children:"RegEx"}),e.isTemporary&&(0,a.jsxs)("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-700 text-xs rounded flex items-center space-x-1",children:[(0,a.jsx)(j.A,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"Temporary"})]}),!e.enabled&&(0,a.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded",children:"Disabled"})]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),e.pattern&&(0,a.jsxs)("code",{className:"text-xs text-gray-700 bg-gray-100 px-2 py-1 rounded mt-2 inline-block",children:["Pattern: ",e.pattern]}),e.allowedResources&&e.allowedResources.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Allowed: "}),e.allowedResources.map(e=>(0,a.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded ml-1",children:e},e))]}),(0,a.jsxs)("div",{className:"mt-2 flex items-center space-x-4 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Added: ",new Date(e.createdAt).toLocaleDateString()]}),e.lastUsed&&(0,a.jsxs)("span",{children:["Last used: ",new Date(e.lastUsed).toLocaleDateString()]}),e.expiresAt&&(0,a.jsxs)("span",{className:"text-yellow-600",children:["Expires: ",new Date(e.expiresAt).toLocaleString()]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,a.jsx)("button",{onClick:()=>(e=>{const s=t.map(t=>t.id===e?{...t,enabled:!t.enabled}:t);y(s)})(e.id),className:"p-2 rounded-lg transition-colors "+(e.enabled?"bg-green-100 text-green-600 hover:bg-green-200":"bg-gray-100 text-gray-400 hover:bg-gray-200"),title:e.enabled?"Disable":"Enable",children:e.enabled?(0,a.jsx)(v.A,{className:"w-4 h-4"}):(0,a.jsx)(A.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>(e=>{const s=t.filter(t=>t.id!==e);y(s)})(e.id),className:"p-2 text-red-400 hover:text-red-600 transition-colors",title:"Delete entry",children:(0,a.jsx)(w.A,{className:"w-4 h-4"})})]})]})},e.id))}),t.length>0&&(0,a.jsx)("div",{className:"bg-green-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x.A,{className:"w-5 h-5 text-green-600"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-green-900",children:[t.filter(e=>e.enabled).length," active entries"]})]}),(0,a.jsxs)("span",{className:"text-sm text-green-700",children:[t.filter(e=>e.isTemporary).length," temporary"]})]})})]})},T={enabled:!0,whitelist:[],pausedDomains:[],tier:{level:1,name:"Basic",unlockedAt:Date.now(),progress:0},notifications:!0,showBadge:!0,autoUpdate:!0,developerMode:!1},R={totalBlocked:0,blockedToday:0,blockedThisWeek:0,blockedThisMonth:0,lastReset:Date.now(),domainStats:{},categoryStats:{ads:0,trackers:0,malware:0,social:0,youtube:0,other:0}};class E{static instance;constructor(){}static getInstance(){return E.instance||(E.instance=new E),E.instance}async getSettings(){try{return(await chrome.storage.local.get("settings")).settings||T}catch(e){return T}}async setSettings(e){try{const t={...await this.getSettings(),...e};await chrome.storage.local.set({settings:t})}catch(e){}}async updateSettings(e){return this.setSettings(e)}async getStats(){try{return(await chrome.storage.local.get("stats")).stats||R}catch(e){return R}}async updateStats(e){try{const t={...await this.getStats(),...e};await chrome.storage.local.set({stats:t})}catch(e){}}async incrementBlockedCount(e,t="ads"){try{const s=await this.getStats(),a=(new Date).setHours(0,0,0,0);s.lastReset<a&&(s.blockedToday=0,s.lastReset=a),s.totalBlocked++,s.blockedToday++,s.domainStats[e]=(s.domainStats[e]||0)+1,s.categoryStats[t]++,await this.updateStats(s)}catch(e){}}async addToWhitelist(e){try{const t=await this.getSettings();t.whitelist.includes(e)||(t.whitelist.push(e),await this.setSettings({whitelist:t.whitelist}))}catch(e){}}async removeFromWhitelist(e){try{const t=await this.getSettings();t.whitelist=t.whitelist.filter(t=>t!==e),await this.setSettings({whitelist:t.whitelist})}catch(e){}}async isWhitelisted(e){try{return(await this.getSettings()).whitelist.some(t=>e===t||e.endsWith(`.${t}`))}catch(e){return!1}}async toggleExtension(){try{const e=!(await this.getSettings()).enabled;return await this.setSettings({enabled:e}),e}catch(e){return!0}}async clearStats(){try{await chrome.storage.local.set({stats:R})}catch(e){}}}E.getInstance();function D(){const[e,t]=(0,r.useState)({enabled:!0,showBadge:!0,notifications:!0,autoUpdate:!0}),[s,l]=(0,r.useState)(1);(0,r.useEffect)(()=>{i()},[]);const i=async()=>{const e=E.getInstance(),s=await e.getSettings();l(s.tier?.level||1),t({enabled:s.enabled??!0,showBadge:s.showBadge??!0,notifications:s.notifications??!0,autoUpdate:s.autoUpdate??!0})};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"General Settings"}),(0,a.jsx)("div",{className:"space-y-4",children:Object.entries(e).map(([s,r])=>(0,a.jsxs)("label",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900 dark:text-white capitalize",children:s.replace(/([A-Z])/g," $1").trim()}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Configure ",s.replace(/([A-Z])/g," $1").toLowerCase().trim()," settings"]})]}),(0,a.jsx)("input",{type:"checkbox",checked:r,onChange:a=>(async e=>{t(e);const s=E.getInstance();await s.updateSettings(e)})({...e,[s]:a.target.checked}),className:"h-5 w-5 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"})]},s))}),s>=3&&(0,a.jsxs)("div",{className:"border-t pt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Backup & Restore"}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("button",{onClick:async()=>{const e=E.getInstance(),t={settings:await e.getSettings(),customFilters:await chrome.storage.local.get("customFilters"),whitelist:await chrome.storage.local.get("whitelist"),stats:await chrome.storage.local.get("stats"),version:"1.0.0",exportDate:(new Date).toISOString()},s=JSON.stringify(t,null,2),a="data:application/json;charset=utf-8,"+encodeURIComponent(s),r=document.createElement("a");r.setAttribute("href",a),r.setAttribute("download",`shieldpro-settings-${Date.now()}.json`),r.click()},className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,a.jsx)(m.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Export Settings"})]}),(0,a.jsxs)("button",{onClick:()=>{const e=document.createElement("input");e.type="file",e.accept="application/json",e.onchange=async e=>{const t=e.target.files?.[0];if(!t)return;const s=new FileReader;s.onload=async e=>{try{const t=JSON.parse(e.target?.result);if(t.settings){const e=E.getInstance();await e.updateSettings(t.settings)}t.customFilters&&await chrome.storage.local.set({customFilters:t.customFilters.customFilters}),t.whitelist&&await chrome.storage.local.set({whitelist:t.whitelist.whitelist}),alert("Settings imported successfully! Reloading extension..."),chrome.runtime.reload()}catch(e){alert("Failed to import settings. Please check the file format.")}},s.readAsText(t)},e.click()},className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[(0,a.jsx)(h.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Import Settings"})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Tier 3 Feature: Export and import all your settings, custom filters, and whitelist"})]})]})}function F(){const[e,t]=(0,r.useState)(1);(0,r.useEffect)(()=>{s()},[]);const s=async()=>{const e=E.getInstance(),s=await e.getSettings();t(s.tier?.level||1)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Filter Settings"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure ad blocking filters and rules"}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-medium text-blue-900 dark:text-blue-300 mb-2",children:"Active Filters"}),(0,a.jsxs)("ul",{className:"space-y-2",children:[(0,a.jsxs)("li",{className:"flex items-center text-sm text-blue-700 dark:text-blue-400",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Tier 1: Basic Ad Blocking (50+ rules)"]}),e>=2&&(0,a.jsxs)("li",{className:"flex items-center text-sm text-blue-700 dark:text-blue-400",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Tier 2: Advanced Trackers (40+ rules)"]}),e>=3&&(0,a.jsxs)("li",{className:"flex items-center text-sm text-blue-700 dark:text-blue-400",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Tier 3: Professional Filters (100+ rules)"]})]})]})}),(0,a.jsx)(k,{currentTier:e})]})}function I(){return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Privacy Settings"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your privacy and tracking protection"})]})}function O(){const[e,t]=(0,r.useState)(1);(0,r.useEffect)(()=>{s()},[]);const s=async()=>{const e=E.getInstance(),s=await e.getSettings();t(s.tier?.level||1)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Whitelist Management"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage websites where ads are allowed"}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Basic Whitelist"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Add websites where you want to allow ads (supports all tiers)"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Enter domain (e.g., example.com)",className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-800 dark:border-gray-600"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Add to Whitelist"})]})]}),(0,a.jsx)(C,{currentTier:e})]})}function W(){return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Tier Progress"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Track your tier progress and unlock new features"})]})}const U=function(){const[e,t]=(0,r.useState)("general"),s=[{id:"general",label:"General",icon:i.A},{id:"filters",label:"Filters",icon:c.A},{id:"privacy",label:"Privacy",icon:n.A},{id:"whitelist",label:"Whitelist",icon:d.A},{id:"tiers",label:"Tiers",icon:o.A}];return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 mb-8",children:[(0,a.jsx)(x.A,{className:"w-10 h-10 text-primary-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"ShieldPro Ultimate"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Advanced Ad Blocker Settings"})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg",children:[(0,a.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,a.jsx)("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:s.map(s=>{const r=s.icon;return(0,a.jsxs)("button",{onClick:()=>t(s.id),className:`\n                      flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors\n                      ${e===s.id?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}\n                    `,children:[(0,a.jsx)(r,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:s.label})]},s.id)})})}),(0,a.jsxs)("div",{className:"p-6",children:["general"===e&&(0,a.jsx)(D,{}),"filters"===e&&(0,a.jsx)(F,{}),"privacy"===e&&(0,a.jsx)(I,{}),"whitelist"===e&&(0,a.jsx)(O,{}),"tiers"===e&&(0,a.jsx)(W,{})]})]})]})})};l.createRoot(document.getElementById("root")).render((0,a.jsx)(r.StrictMode,{children:(0,a.jsx)(U,{})}))}},s={};function a(e){var r=s[e];if(void 0!==r)return r.exports;var l=s[e]={exports:{}};return t[e].call(l.exports,l,l.exports,a),l.exports}a.m=t,e=[],a.O=(t,s,r,l)=>{if(!s){var i=1/0;for(o=0;o<e.length;o++){for(var[s,r,l]=e[o],c=!0,n=0;n<s.length;n++)(!1&l||i>=l)&&Object.keys(a.O).every(e=>a.O[e](s[n]))?s.splice(n--,1):(c=!1,l<i&&(i=l));if(c){e.splice(o--,1);var d=r();void 0!==d&&(t=d)}}return t}l=l||0;for(var o=e.length;o>0&&e[o-1][2]>l;o--)e[o]=e[o-1];e[o]=[s,r,l]},a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.j=575,(()=>{var e={575:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var r,l,[i,c,n]=s,d=0;if(i.some(t=>0!==e[t])){for(r in c)a.o(c,r)&&(a.m[r]=c[r]);if(n)var o=n(a)}for(t&&t(s);d<i.length;d++)l=i[d],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(o)},s=self.webpackChunkshieldpro_ultimate=self.webpackChunkshieldpro_ultimate||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var r=a.O(void 0,[121],()=>a(9042));r=a.O(r)})();
//# sourceMappingURL=options.js.map